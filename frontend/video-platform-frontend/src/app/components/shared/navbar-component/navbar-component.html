<header class="header" [class.search-active]="isMobileSearchActive" (click)="menuOpen = false">
  <div class="logo-container" (click)="goHome()">
    <h1 class="logo">VideoSphere</h1>
    <img src="img/video-sphere-logo.png" alt="VideoSphere Logo" class="logo-img" />
  </div>

  <div class="search-container">
    <input type="text" placeholder="Search videos..." [(ngModel)]="query" (keyup.enter)="emitSearch()" />
    <button class="search-btn" (click)="emitSearch()">🔍</button>
  </div>

  <div class="actions">

    <button class="mobile-search-toggle" (click)="toggleMobileSearch()"
      [attr.aria-label]="isMobileSearchActive ? 'Close search' : 'Open search'">
      <span *ngIf="!isMobileSearchActive">🔍</span>
      <span *ngIf="isMobileSearchActive">X</span>
    </button>

    <button class="upload-button" (click)="goToUpload()">
      <span class="text">Upload</span>
    </button>

    <div class="profile-avatar-container" (click)="toggleMenu(); $event.stopPropagation()">
      <img [src]="avatarSafeUrl" alt="Avatar" class="avatar-img" />

      <div class="dropdown-menu" *ngIf="menuOpen" (click)="$event.stopPropagation()">
        <button (click)="goToProfile()">Profile</button>
        <button (click)="logout()">Logout</button>
      </div>
    </div>

  </div>
</header>